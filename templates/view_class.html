{% extends "layout.html" %}

{% block title %}
{{ class_data.name }}
{% endblock %}

{% block content %}
<h2>Class {{ class_data.name }} - {{ class_data.type }} - {{ class_data.students_count }} Students</h2>
<form action="/add_student" method="post" class="row g-3" enctype="multipart/form-data">
    <input type="hidden" name="class" value="{{ class_data.id }}">
    <div class="col-auto">
        <a href="/students?class={{ class_data.id }}" class="btn btn-primary">View Students</a>
    </div>
    <div class="col-auto">
        <a href="/add_student?class={{ class_data.id }}" class="btn btn-primary form-control">Add one student</a>
    </div>
    <div class="col-auto">
        <a class="btn btn-dark form-control">OR</a>
    </div>
    <div class="col-auto">
        <input class="form-control" type="file" name="file" id="formFile" accept=".csv" required>
    </div>
    <div class="col-auto">
        <button type="submit" class="btn btn-primary mb-3">Add Students CSV!</button> (Name, Email, Phone)
    </div>
    <div class="col-auto">
        <a href="/edit_class?id={{ class_data.id }}" class="btn btn-warning">Edit Class</a>
    </div>
    <div class="col-auto">
        <a href="/remove_class?id={{ class_data.id }}" class="btn btn-danger">Remove Class</a>
    </div>
    <div class="col-auto">
        <a href="/class_report?id={{ class_data.id }}" class="btn btn-primary">View Class Report</a>
    </div>
</form>
{% if instances %}
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Total Score</th>
            <th>Category</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        {% for inst in instances %}
        <tr class="clickable-row">
            <td>
                <a href="/view_instance?id={{ inst.id }}">{{ inst.id }}</a>
            </td>
            <td>
                <a href="/view_instance?id={{ inst.id }}">{{ inst.title }}</a>
            </td>
            <td>
                <a href="/view_instance?id={{ inst.id }}">{{ inst.total }}</a>
            </td>
            <td>
                <a href="/view_instance?id={{ inst.id }}">{{ inst.category_name }}</a>
            </td>
            <td>
                <a href="/view_instance?id={{ inst.id }}">{{ inst.date }}</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock %}
